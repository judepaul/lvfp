<div class="row" style="height:60px;"></div>

<%#= render 'form', speech: @speech %>

<div class="container">
<!-- <p id="notice"><%= notice %></p> -->
<div id="accordion">
  <% unless @access_codes.blank?
        @access_codes.each_with_index do |ac,indx|
  %>
  <div class="card">
    <div class="card-header" id="heading<%=indx+1%>" class="btn btn-link" data-toggle="collapse" data-target="#collapse<%=indx+1%>" aria-expanded="true" aria-controls="collapse<%=indx+1%>" style="color: #FFF !important; text-decoration: none !important; padding: 10px; !important;">
      <div class="row">
      <div class="col-md-11" style="padding-left:20px;"><h6> Campaign Name: <%= ac.title.titlecase %> | Listener Group  Access Code: <%= ac.code %></h6></div>
      <!-- <div class="col-md-6 text-right" style="padding-right:20px;"><h6>Published Articles - <%#= articlel_count ac.id %></h6></div> -->
        <div class="col-md-1" style="padding:3px 40px 0 0;"><i class="fas fa-plus float-right "></i></div>
      </div>
    </div>
    <%# <% if indx==0 %>
        <!-- <div id="collapse<%=indx+1%>" class="collapse show" aria-labelledby="heading<%=indx+1%>" data-parent="#accordion"> -->
    <%# <% else %>
    <% unless @group_code.blank? %>
        <% if @group_code.to_i == ac.id %>
                  <div id="collapse<%=indx+1%>" class="collapse show" aria-labelledby="heading<%=indx+1%>" data-parent="#accordion">
        <% else %>
                <div id="collapse<%=indx+1%>" class="collapse" aria-labelledby="heading<%=indx+1%>" data-parent="#accordion">
        <% end %>
    <% else %>
            <%if indx==0 %>
        <div id="collapse<%=indx+1%>" class="collapse show" aria-labelledby="heading<%=indx+1%>" data-parent="#accordion"> 
    <% else %>
            <div id="collapse<%=indx+1%>" class="collapse" aria-labelledby="heading<%=indx+1%>" data-parent="#accordion">
      
      <% end %>
    <% end %>
      <div class="card-body table-responsive">
        <table class="table table-bordered table-sm table-hover">
          <thead class="thead-light">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Articles</th>
            </tr>
          </thead>
        <% ac.access_code_speech_map.each_with_index do |acsm,indx| %>
          <tbody>
            <tr style="cursor: pointer;" onclick="location.href='<%= edit_speech_path(acsm.speech) %>'">
              <th><%= acsm.speech.id %></th>
              <td><p class="content"><strong>Title:- <%= !acsm.speech.title.blank? ? acsm.speech.title : '' %></strong> <span style="padding: 1px 5px 1px 5px; color:#FFF; background-color: <%= acsm.speech.published? ? 'green' : !acsm.speech.published? ? 'orange' : "" %>;"><strong><%= acsm.speech.published? ? 'Published' : !acsm.speech.published? ? 'Draft' : "" %></strong></span></p><p class="content"><%= acsm.speech.content %></p></td>
            </tr>
          </tbody>
        <% end %>
        </table>
      </div>
    </div>

  </div>
  <br/>
  <% end
    end
  %>

	<div class="row">
  		<div class="actions text-right col-md-12" style="padding:30px 10px 0 30px; bottom: 0; right: 0;">
  			<%= link_to 'Add Article', new_speech_path, class: 'btn btn-outline-primary' %>

		</div>
	</div>
</div>
</div>

<%#= link_to 'New Speech', new_speech_path %>
<br/>



<!-- Modal -->
<div class="modal fade" id="contentModal" data-keyboard="false" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="contentModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
          <div class="col-md-6">
            <h5 class="modal-title" id="exampleModalLabel">Content</h5>
          </div>
          <div class="col-md-3 text-right" >
            <!-- <audio id="audioPlayback" controls> -->
            <audio id="audioPlayback">
              <source id="audioSource" type="audio/mp3" src="">
            </audio>
            <button type="button" class="close close-modal" data-dismiss="modal" aria-label="Close" data-toggle="tooltip" data-placement="top" title="Close">
              <i class="fa fa-times-circle fa-lg"></i> 
            </button>
            <button type="button" class="close audioPlayback play" onclick="aud_play_pause()" style="outline:none !important; padding-right:15px;"><span><i class="fa fa-play-circle fa-lg" aria-hidden="true"></i></span></button>
            </div>
      </div>
      <input type="hidden" id="speech_content" />
      <div id="contentDetails" class="modal-body">
        
      </div>
      <div class="modal-footer">
        <div class="col-md-6">
          <button type="button" class="btn btn-outline-danger delete_speech" id="delete-btn">Delete</button>
          <%#= link_to 'Delete', '', method: :delete, :class => 'btn btn-outline-danger delete-speech', id: "delete-btn" %>
          <div class="panel panel-default" style="text-align:left;padding-top:15px;display:none;" id="delete-confirm-pane">
	<div class="panel-heading"><h6>Confirmation</h6></div>
		<div class = "panel-body"></div>
    Are you sure you want to delete this Article?
    <div style="padding:10px 60px 0 0;"align="right""><button type="button" class="btn btn-outline-primary" id="delete-confirm-cancel">Cancel</button>
		  <!-- <button type="button" class="btn btn-primary hide" id="btn2">Ok</button> -->
      <%= link_to 'Ok', '', method: :delete, :class => 'btn btn-outline-danger delete-speech' %>
    </div>
	</div>
        </div>
        <div class="col-md-6 offset-md-5 text-right">
          <button type="button" class="btn btn-outline-primary close-modal" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>
